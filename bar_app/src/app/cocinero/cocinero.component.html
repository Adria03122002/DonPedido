<!-- Cabecera con botón salir -->
    <div class="caja-superior">
      <h2 class="titulo-cocina">PANEL DE COCINA</h2>
      <button class="boton-salir" (click)="salir()">Salir</button>
    </div>

    <div class="contenedor-pedidos">
      <!-- MESA CARD - TU LÓGICA ORIGINAL -->
      <div class="mesa-card" *ngFor="let pedido of pedidos()">
        <div class="mesa-header">
          <!-- Esta es la línea que "no casca" gracias a los ? -->
          <h3>Mesa {{ pedido.ubicacion }}</h3>
          
          <div class="tiempo-transcurrido">
            Hace {{ calcularTiempoTranscurrido(pedido.fecha) }}
          </div>
          <span class="estado-tag" [ngClass]="pedido.estado">{{ pedido.estado }}</span>
        </div>

        <div class="cuerpo-pedido">
          <div *ngFor="let linea of pedido.lineas" 
              class="pedido-linea" 
              [ngClass]="{ 'linea-con-mod': linea.modificacion }">
            <div class="pedido-producto">
              <span class="cantidad">{{ linea.cantidad }}x</span> {{ linea.producto.nombre }}
            </div>
            <div class="pedido-mod" *ngIf="linea.modificacion">{{ linea.modificacion }}</div>
            <div class="pedido-mod vacia" *ngIf="!linea.modificacion">Sin modificaciones</div>
          </div>
        </div>

        <div class="pie-card">
          <button 
            *ngIf="pedido.estado !== 'servido'"
            (click)="marcarComoTerminado(pedido.id)"
            class="btn-servir">
            Marcar como terminado
          </button>
        </div>
      </div>

      <!-- Mensaje si no hay pedidos -->
      <div *ngIf="pedidos().length === 0" class="sin-pedidos">
        Esperando comandas...
      </div>
    </div>