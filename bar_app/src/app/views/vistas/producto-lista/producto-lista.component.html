<div class="producto-lista-container">
  <header class="lista-header">
    <h2>
      Lista de <span class="accent">Productos</span>
    </h2>
    <div class="btn-contenedor-derecha">
      <button class="btn-crear" [routerLink]="['/barra/productos/crear']">
        <span>+</span> A√±adir producto
      </button>
    </div>
  </header>

  <div class="tabla-card">
    <table>
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Precio</th>
          <th>Tipo</th>
          <th>Estado</th>
          <th>Ingredientes</th>
          <th class="text-center">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let producto of productos">
          <td class="font-bold">{{ producto.nombre }}</td>
          <td class="price-cell">{{ producto.precio | currency:'EUR' }}</td>
          <td>
            <span class="tipo-tag">{{ getEmoji(producto.tipo) }} {{ producto.tipo }}</span>
          </td>
          <td>
            <span class="badge-disponible" [ngClass]="producto.disponible ? 'si' : 'no'">
              {{ producto.disponible ? 'Disponible' : 'Agotado' }}
            </span>
          </td>
          <td>
            <div class="ingredientes-tags">
              <span *ngFor="let pi of producto.ingredientes" class="ing-tag">
                {{ pi.ingrediente.nombre }} {{ pi.cantidadNecesaria }} {{ pi.ingrediente.unidad }}
              </span>
              <em *ngIf="!producto.ingredientes.length" class="text-muted">Sin receta</em>
            </div>
          </td>
          <td>
            <div class="actions-cell">
              <button class="btn-accion editar" (click)="editarProducto(producto)" title="Editar">
                ‚úèÔ∏è
              </button>
              <button class="btn-accion eliminar" (click)="eliminarProducto(producto.id)" title="Eliminar">
                üóëÔ∏è
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="modal-overlay" *ngIf="productoAEliminarId !== null">
    <div class="modal-card animate-in">
      <div class="modal-icon">‚ö†Ô∏è</div>
      <h3>¬øEliminar producto?</h3>
      <p>Esta acci√≥n borrar√° <strong>definitivamente</strong> el producto de la carta. Esta operaci√≥n no se puede deshacer.</p>
      
      <div class="modal-footer-btns">
        <button class="btn-modal confirmar" (click)="confirmarEliminacion()">Eliminar ahora</button>
        <button class="btn-modal cancelar" (click)="cerrarModal()">Mejor no, volver</button>
      </div>
    </div>
  </div>
</div>